set encoding utf8
dir_repo="/code/Monte_Carlo/"
dir_trabajo="/data/Monte_Carlo/SIM/rand1/"
ruta_it="iteraciones/"
ruta_salida="plot/"

estaciones="11020 11023 11025 11035 11036 11040 11045 11055 11095 11099 11143 11153 11157 11162 14114 14369 11049 11159 14076 14083 14084 14123 14157 14320"
prefijos="R Bias Var Sub Sob RMSE"
array ejes=["Pearson coefficient","Bias (%)","Variance","Underestimation","Overestimation","RMSE"]
iteraciones=1000

set term svg size 600,400 font 'Georgia,12'
set border linewidth 1
set grid lw 1
set encoding utf8
set datafile separator ","
set key outside center right
set pointsize 0.3

set tmargin 0.5
set bmargin 4
set lmargin 8
set rmargin 20

#########################################################
####
####	Grafica 
####
#########################################################

#set output prefijo.".svg"
#set term png size 4500,2250 font 'Georgia,80'
do for [i=1:words(prefijos)]{
coeficiente=word(prefijos,i)
prefijo=coeficiente.iteraciones
titulov=sprintf("%s",ejes[i])
set ylabel titulov offset 1.5,0
do for [i=1:words(estaciones)]{
nombre=dir_trabajo.ruta_it.word(estaciones,i).prefijo
set output dir_trabajo.ruta_salida.coeficiente."/".word(estaciones,i).prefijo.".svg"
set label 1 'Iteration' at screen 0.38,0.02
set multiplot layout 2,1 \
              margins 0.12,0.75,0.1,0.98 \
              spacing 0.08,0.08
plot nombre.'.csv' using 1:2 title 'RCP4.5 MC' w lp lc rgb "blue",\
'' using 1:4 title 'RCP6.0 MC' w lp lc rgb "orange",\
'' using 1:6 title 'RCP8.5 MC' w lp lc rgb "red"
plot nombre.'.csv' using 1:3 title 'RCP4.5 ANN' w lp lc rgb "blue",\
'' using 1:5 title 'RCP6.0 ANN' w lp lc rgb "orange",\
'' using 1:7 title 'RCP8.5 ANN' w lp lc rgb "red"
unset multiplot
}
}

#'promediosHIST.csv' using (0):i:(1000):(0) w vector lc rgb "skyblue" nohead title 'Promedio hist√≥rico',\
#'promediosGCM.csv' using (0):i:(1000):(0) w vector lc rgb "blue" nohead title 'Promedio GCM'
