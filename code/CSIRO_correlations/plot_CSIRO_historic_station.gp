set encoding utf8
estacion=ARG1
datos=ARG2
array modelos=["CSIRO-Mk3-6-0"]
i=1
max=400
set datafile separator ","

set term pdf enhanced size 8cm,8cm font 'Helvetica,12'
#set term pdf size 7cm,7cm square font 'Helvetica,12'
set term svg size 400,400 square font 'Helvetica,14'
set border linewidth 1.5
set grid lw 0.75
set pointsize 0.3
#set key inside top right
set key at graph 0.9,0.925
#set autoscale fix
set size square
set xrange [1:max]
set yrange [1:max]
set xlabel 'Monthly historical rainfall (mm)'
array stations=["11020","11023","11025","11035","11036","11040","11045","11049","11055","11095","11099","11143","11153","11157","11159","11162","14076","14083","14084","14114","14123","14157","14320","14369"]
array scenario=["historical","RCP4.5","RCP6.0","RCP8.5"]
#########################################################
####
####	Grafica las correlaciones de cada modelo.
####
#########################################################
col1=2
do for [j=1:24]{
station=stations[j]
do for [i=1:4] {
datos=station.".csv"
set output station.scenario[i].'.svg'
set ylabel 'Monthly '.scenario[i].' ANN rainfall (mm)'
col2=i+3
stats datos using col1:col2 name "A"
corp = system(sprintf("Rscript f_correlacion.r %i \"%s\"",col2,datos))
#ti=sprintf(modelos[i]."\n r=%s",corp)
ti=sprintf("Station ".station."\n r=%s",corp)
print(ti)
f(x) = A_slope * x + A_intercept
plot datos u col1:col2 w p notitle lc rgb "#1966FF" lw 1.5 pt 7,\
f(x) title ti lc rgb "#FF7E00" lw 1.75 dt 7
}
}
